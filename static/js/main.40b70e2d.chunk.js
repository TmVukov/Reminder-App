(this["webpackJsonpreminder-app"]=this["webpackJsonpreminder-app"]||[]).push([[0],{109:function(e,t,n){},110:function(e,t,n){},111:function(e,t,n){},115:function(e,t,n){},238:function(e,t,n){},239:function(e,t,n){},240:function(e,t,n){"use strict";n.r(t);var a=n(6),r=n(1),c=n.n(r),i=n(41),l=n.n(i),s=(n(109),n(9)),o=(n(110),n(111),n(67));n(112);o.a.initializeApp({apiKey:"AIzaSyBmxgjCOGiaA5AufjAs_qDfYGVa8Th0YWE",authDomain:"habit-reminder-653cd.firebaseapp.com",databaseURL:"https://habit-reminder-653cd.firebaseio.com",projectId:"habit-reminder-653cd",storageBucket:"habit-reminder-653cd.appspot.com",messagingSenderId:"369945436017",appId:"1:369945436017:web:f5d62a8f20ba0e9a1920d0"});var d=o.a.firestore(),u=n(11),j=(n(115),n(103)),m=(n(116),n(97)),b=n.n(m),f=Object(r.createContext)();function O(e){var t=e.children,n=Object(r.useState)(""),c=Object(s.a)(n,2),i=c[0],l=c[1],o=Object(r.useState)(""),d=Object(s.a)(o,2),u=d[0],j=d[1],m=Object(r.useState)([]),b=Object(s.a)(m,2),O=b[0],p=b[1],h=Object(r.useState)(""),v=Object(s.a)(h,2),x=v[0],g=v[1],_=Object(r.useState)(""),D=Object(s.a)(_,2),S=D[0],y=D[1],A=Object(r.useState)(!1),C=Object(s.a)(A,2),I=C[0],N=C[1],w=Object(r.useState)([]),k=Object(s.a)(w,2),T=k[0],B=k[1],L=Object(r.useState)([]),G=Object(s.a)(L,2),E=G[0],P=G[1],R=Object(r.useState)([]),z=Object(s.a)(R,2),M=z[0],U=z[1],Y=Object(r.useState)([]),F=Object(s.a)(Y,2),J=F[0],q=F[1],K=Object(r.useState)(""),V=Object(s.a)(K,2),W=V[0],X=V[1];return Object(a.jsx)(f.Provider,{value:{title:i,setTitle:l,description:u,setDescription:j,reminders:O,setReminders:p,alarmDate:x,setAlarmDate:g,alarmTime:S,setAlarmTime:y,alarmStart:I,setAlarmStart:N,intervalID:T,setIntervalID:B,newIntervalID:E,setNewIntervalID:P,alarmDisplay:M,setAlarmDisplay:U,savedAlarms:J,setSavedAlarms:q,color:W,setColor:X},children:t})}var p=n(43),h=function(e){return e.map((function(e){return e.split("/")})).map((function(e){return[e[1],e[0],e[2],e[3]].join("/")})).map((function(e){return Date.parse(e)}))};function v(){var e=Object(r.useState)(!1),t=Object(s.a)(e,2),n=t[0],c=t[1],i=Object(r.useContext)(f),l=i.reminders,o=i.alarmDate,m=i.setAlarmDate,O=i.alarmTime,v=i.setAlarmTime,x=i.alarmStart,g=i.setAlarmStart,_=i.intervalID,D=i.setIntervalID,S=i.alarmDisplay,y=i.setAlarmDisplay,A=i.savedAlarms,C=i.setSavedAlarms,I=i.newIntervalID,N=i.setNewIntervalID,w=function(){var e=(new Date).toLocaleDateString("en-GB");console.log(e);var t=(new Date).toLocaleTimeString("en-GB");(console.log(t),e===o&&t===O)&&(new Audio("Audio/alarmSound.mp3").play(),g(!0))};Object(r.useEffect)((function(){d.collection("reminders").get().then((function(e){var t=[];e.forEach((function(e){return t.push(e.data().alarmDisplay)})),C(t.flat())}))}),[m,v,C]);var k=Object(r.useCallback)((function(){var e=Object(u.a)(A).sort((function(e,t){return e<t?-1:1})),t=h(e),n=Math.min.apply(Math,Object(u.a)(t)),a=new Date(n).toLocaleDateString("en-GB");console.log(a);var r=new Date(n).toLocaleTimeString("en-GB");console.log(r);var c=(new Date).toLocaleDateString("en-GB");console.log(c);var i=(new Date).toLocaleTimeString("en-GB");(console.log(i),c===a&&i===r)&&(new Audio("Audio/alarmSound.mp3").play(),g(!0))}),[A,g]);Object(r.useEffect)((function(){if(A.length){var e=setInterval(k,1e3);N([e])}}),[k,A.length,N]);var T=Object(r.useCallback)((function(){if(d.collection("reminders").orderBy("alarmDisplay").limit(1).get().then((function(e){if(!e.empty)return e.docs[0].ref.delete()})),A.length){var e=Object(u.a)(A).sort((function(e,t){return e<t?-1:1}));e.splice(0,1),C(e);var t=Object(u.a)(I);clearInterval(t.splice(0,1)),N(t)}else{var n=Object(u.a)(_);clearInterval(n.splice(0,1)),D(n)}}),[A,C,_,D,I,N]);return Object(r.useEffect)((function(){if(x){var e=setTimeout((function(){g(!1),T()}),3e4);return function(){clearTimeout(e)}}}),[x,g,T]),Object(a.jsxs)("div",{className:"alarm__container",children:[Object(a.jsx)(j.a,{locale:"en",tileClassName:["react-calendar","react-calendar__navigation","react-calendar__navigation__label","react-calendar__navigation__arrow"],onChange:function(e){m(e.toLocaleDateString("en-GB"))}}),Object(a.jsx)(b.a,{clearIcon:null,disableClock:!0,hourPlaceholder:"hours",minutePlaceholder:"minutes",onChange:function(e){v(e+":00")},value:O,tileClassName:["react-time-picker_wrapper"]}),Object(a.jsxs)("div",{className:"alarm__message",children:[o||O||!n?o||O?o?l.some((function(e){return e.alarmDisplay[0]===S[0]}))?Object(a.jsx)("p",{children:"Alarm is already set!"}):S.length&&h(S)<(new Date).getTime()?Object(a.jsx)("p",{children:"Alarm is not valid! Please discard it."}):S.length?Object(a.jsx)("p",{children:"Alarm is saved!"}):S&&O?Object(a.jsxs)("p",{children:["Save alarm at ",o,"/",O.slice(0,5),"?"]}):"":Object(a.jsx)("p",{children:"Please select date."}):"":Object(a.jsx)("p",{children:"Alarm discarder. Please add new alarm."}),o&&O&&Object(a.jsxs)("div",{children:[Object(a.jsx)("button",{className:"alarm__icon-check",disabled:!!S.length,children:Object(a.jsx)(p.a,{onClick:function(){var e="".concat(o,"/").concat(O);y((function(t){return[].concat(Object(u.a)(t),[e])}));var t=setInterval(w,1e3);D((function(e){return[].concat(Object(u.a)(e),[t])})),c(!1)}})}),Object(a.jsx)(p.b,{onClick:function(){if(S.length){var e=Object(u.a)(_);e.length>1?(clearInterval(e.splice(-1,1)),D(e)):(clearInterval(e.splice(0,1)),D(e))}m(null),v(null),y([]),c(!0)},className:"alarm__icon-close"})]})]})]})}var x=n(45),g=n(102);function _(){var e=Object(r.useState)(!1),t=Object(s.a)(e,2),n=t[0],c=t[1],i=Object(r.useContext)(f),l=i.title,o=i.setTitle,u=i.description,j=i.setDescription,m=i.alarmDisplay,b=i.setAlarmDisplay,O=i.setAlarmDate,p=i.setAlarmTime,_=i.setColor,D=i.color,S=i.intervalID,y=i.reminders;return Object(a.jsxs)("div",{className:"form__container",children:[Object(a.jsx)("h1",{children:"Add reminder"}),Object(a.jsxs)("form",{className:"form",children:[Object(a.jsxs)("div",{className:"form__box",children:[Object(a.jsx)(x.b,{className:"form__title-icon"}),Object(a.jsx)("input",{type:"text",placeholder:"Add title...",maxLength:"30",value:l,onChange:function(e){return o(e.target.value)}})]}),30===l.length&&Object(a.jsx)("p",{className:"form__title-msg",children:"Sorry, allowed title length is 30 characters."}),Object(a.jsxs)("div",{className:"form__box",children:[Object(a.jsx)(x.a,{className:"form__description-icon"}),Object(a.jsx)("input",{type:"text",placeholder:"Add description...",maxLength:"200",value:u,onChange:function(e){return j(e.target.value)}})]}),200===u.length&&Object(a.jsx)("p",{className:"form__description-msg",children:"Sorry, allowed description length is 200 characters."})]}),Object(a.jsx)("button",{className:"form__btn-color",onClick:function(){return c(!n)},children:"Select color"}),n&&Object(a.jsx)(g.a,{width:"300px",circleSize:19,onChangeComplete:function(e){_(e.hex)}}),Object(a.jsx)(v,{}),Object(a.jsx)("button",{className:"form__btn",onClick:function(){d.collection("reminders").add({title:l,description:u,alarmDisplay:m,intervalID:S.slice(-1),color:D}),o(""),j(""),O(null),p(null),b([]),_("")},disabled:!!(!m.length||y.some((function(e){return e.alarmDisplay[0]===m[0]}))||h(m)<(new Date).getTime()),children:"Save reminder"})]})}var D=n(70);n(238);function S(){var e=Object(r.useContext)(f),t=e.reminders,n=e.setAlarmStart,a=e.intervalID,c=e.setIntervalID,i=e.newIntervalID,l=e.setNewIntervalID,s=e.setAlarmDisplay,o=e.savedAlarms,j=e.setSavedAlarms;return function(e,r){d.collection("reminders").doc(e).delete();var m,b,f=Object(u.a)(a);m=f.filter((function(e){return e===t[r].intervalID[0]})),b=f.filter((function(e){return e!==t[r].intervalID[0]})),clearInterval(m),c(b);var O=Object(u.a)(i);clearInterval(O.splice(0,1)),l(O);var p=Object(u.a)(o).filter((function(e){return e!==t[r].alarmDisplay[0]}));j(p),t[t.length-1].id===t[r].id&&n(!1),s([])}}function y(){var e=Object(r.useState)(!1),t=Object(s.a)(e,2),n=t[0],c=t[1],i=Object(r.useState)(!1),l=Object(s.a)(i,2),o=l[0],u=l[1],j=Object(r.useState)(null),m=Object(s.a)(j,2),b=m[0],O=m[1],p=Object(r.useContext)(f),h=p.title,v=p.setTitle,x=p.description,g=p.setDescription,_=p.reminders,y=p.setReminders;Object(r.useEffect)((function(){d.collection("reminders").orderBy("alarmDisplay","desc").onSnapshot((function(e){return y(e.docs.map((function(e){return Object(D.a)(Object(D.a)({},e.data()),{},{id:e.id})})))}))}),[y]);var A=S();return Object(a.jsxs)("div",{className:"reminder__container",children:[Object(a.jsx)("h1",{children:"Your Reminders"}),_.map((function(e,t){return Object(a.jsxs)("div",{className:"reminder__box",style:{borderColor:e.color},children:[Object(a.jsx)("button",{className:"reminder__btn",onClick:function(){return A(e.id,t)},children:"\u2715"}),n&&b===e.id?Object(a.jsxs)("div",{children:[Object(a.jsx)("input",{type:"text",placeholder:"edit...",maxLength:"30",value:h,onChange:function(e){return v(e.target.value)},autoFocus:!0}),Object(a.jsx)("button",{onClick:function(){return function(e){d.collection("reminders").doc(e).update({title:h}),c(!1),v("")}(e.id)},className:"reminder__update",children:"Update"}),Object(a.jsx)("button",{onClick:function(){return c(!1)},className:"reminder__cancel",children:"Cancel"})]}):Object(a.jsx)("div",{onClick:function(){return function(e){O(e),c(!0)}(e.id)},className:"reminder__title",children:e.title}),o&&b===e.id?Object(a.jsxs)("div",{children:[Object(a.jsx)("textarea",{type:"text",placeholder:"edit...",maxLength:"200",value:x,onChange:function(e){return g(e.target.value)},autoFocus:!0}),Object(a.jsx)("button",{onClick:function(){return function(e){d.collection("reminders").doc(e).update({description:x}),u(!1),g("")}(e.id)},className:"reminder__update",children:"Update"}),Object(a.jsx)("button",{onClick:function(){return u(!1)},className:"reminder__cancel",children:"Cancel"})]}):Object(a.jsx)("div",{onClick:function(){return function(e){O(e),u(!0)}(e.id)},className:"reminder__description",children:e.description}),e.alarmDisplay.map((function(e,t){return Object(a.jsx)("p",{children:e.slice(0,-3)},t)}))]},t)}))]})}n(239);var A=n(29);function C(){var e=["#607d8b","#795548","#3f51b5","#673ab7"],t=Object(r.useContext)(f),n=t.reminders,c=t.alarmStart,i=S();return Object(a.jsx)("div",{className:"notification__container",children:n[n.length-1]&&c&&Object(a.jsxs)(A.a.div,{className:"notification",style:{backgroundColor:n[n.length-1].color},animate:{translateX:[80,-80,60,-60,40,-40,n.length-1]},children:[Object(a.jsxs)("p",{style:e.includes(n[n.length-1].color)?{color:"#ffffff"}:{color:"#000000"},children:["Reminder for: ",Object(a.jsx)("br",{}),Object(a.jsx)("strong",{children:n[n.length-1].title.length>15?n[n.length-1].title.slice(0,15)+"...":n[n.length-1].title})," ",Object(a.jsx)("br",{})," at ",n[n.length-1].alarmDisplay[0].slice(0,-3)]}),Object(a.jsx)("button",{className:"notification__btn",onClick:function(){return i(n[n.length-1].id,n.length-1)},style:e.includes(n[n.length-1].color)?{color:"#ffffff"}:{color:"#000000"},children:"\u2715"})]})})}var I=n(46);var N=function(){var e=Object(r.useState)(!1),t=Object(s.a)(e,2),n=t[0],c=t[1],i={duration:.3,yoyo:1/0,ease:"easeOut"};return Object(a.jsxs)("div",{className:"App",children:[n?Object(a.jsx)(I.a,{className:"App__btn-close",onClick:function(){return c(!1)}}):Object(a.jsx)(A.a.div,{className:"App__btn-open",transition:i,animate:{y:["15%","-15%"]},children:Object(a.jsx)(I.b,{onClick:function(){return c(!0)}})}),n&&Object(a.jsxs)(A.a.div,{initial:{opacity:0,y:"100%"},animate:{opacity:1,y:0},transition:{type:"spring",stiffness:180},className:"App__container",children:[Object(a.jsx)("div",{className:"App__left",children:Object(a.jsx)(_,{})}),Object(a.jsx)("div",{className:"App__right",children:Object(a.jsx)(y,{})})]}),Object(a.jsx)(C,{})]})};l.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(O,{children:Object(a.jsx)(N,{})})}),document.getElementById("root"))}},[[240,1,2]]]);
//# sourceMappingURL=main.40b70e2d.chunk.js.map